<!DOCTYPE html>
<html>
	<head>
		<title>Wars - 1000 to Present</title>
		<script src="d3.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="custom.css">
		<style type="text/css">
			div.wars_started_per_decade {
				font: 10px sans-serif;
			}

      body {
        font-family: Georgia;
        text-align: center;
      }

      ul {
        text-align: center;
      }

      li {
        text-align: left;
      }

			.axis path,
			.axis line {
  				fill: none;
  				stroke: #000;
  				shape-rendering: crispEdges;
			}

			.x.axis path {
  				display: none;
			}

			.line {
  				fill: none;
  				stroke: steelblue;
  				stroke-width: 1.5px;
			}

			.overlay {
  				fill: none;
  				pointer-events: all;
			}

			.focus circle {
  				fill: none;
  				stroke: steelblue;
			}
		</style>
	</head>
	<body>
    <h1>Visualizing The History of War</h1>

    <blockquote>... the history of the world is the history of war.</blockquote>
    <small>- Lt. Col. Charles Ã  Court Repington</p></small>

    This is an attempt to visualize and study the history of warfare - how many wars mankind
    has engaged in, who wages the most and so on. Links to the source code and the datasets
    are provided at the end of this document. The datasets were constructed by processing
    <a href="http://en.wikipedia.org/wiki/Category:Lists_of_wars_by_date">this Wikipedia page</a>.

    The first plot I constructed was of the number of wars initiated per decade from 1000 A.D. to the present
    date. The plot looks like this:

		<div class="wars_started_per_decade"></div>

    The few interesting spikes we observe are:

    <ul>
      <li><strong>1510-1519 AD:</strong> Apparently this was the result of Ottoman aggression.</li>
      <li><strong>1640-1649 AD:</strong> A massive spike but no real correlation between the various events.</li>
      <li><strong>1800-1809 AD:</strong> A massive spike that was driven completely by European colonial powers. Nearly every war was started by a European colonial power.</li>
      <li><strong>1860-1869 AD:</strong> A large chunk of battles fought in this era were parts of the American and Japanese civil wars.</li>
      <li><strong>1940-1947 AD:</strong> World War I, The Banana Wars and Saudi Arabian Unification.</li>
      <li><strong>1990-1999 AD:</strong> A <i>massive</i> number of civil wars in Africa, Central Asia and general insanity in the middle east.</li>
    </ul>
		<script type="text/javascript">
			var margin = {top: 20, right: 20, bottom: 50, left: 50},
				width = 1200 - margin.left - margin.right,
				height = 600 - margin.top - margin.bottom;

			var x = d3.scale.linear().range([0, width]);
			var y = d3.scale.linear().range([height, 0]);

			var getX = d3.bisector(function(d) { return +d.Decade; }).left;

			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom")
				.ticks(100);

			var yAxis = d3.svg.axis()
				.scale(y)
				.orient("left");

			var line = d3.svg.line()
				.x(function (d) { return x(d.Decade); })
				.y(function (d) { return y(d.Count); });

			var svg = d3.select("div.wars_started_per_decade").append("svg")
    			.attr("width", width + margin.left + margin.right)
    			.attr("height", height + margin.top + margin.bottom)
  				.append("g")
    			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
			d3.csv("wars_started_per_decade.csv")
				.get(function (error, data) { data.forEach(function (d) {
					x.domain(d3.extent(data, function (d) { return +d.Decade; }));
					y.domain(d3.extent(data, function (d) { return +d.Count; }));
				});
			svg.append("g")
      			.attr("class", "x axis")
      			.attr("transform", "translate(0," + height + ")")
      			.call(xAxis)
      			.selectAll("text")
      				.style("text-anchor", "end")
      				.attr("dx", "-.8em")
      				.attr("dy", ".15em")
      				.attr("transform", function (d) {
      					return "rotate(-90)"
      				});

			svg.append("g")
				.attr("class", "y axis")
				.call(yAxis)
				.append("text")
      			.attr("transform", "rotate(-90)")
      			.attr("y", 6)
      			.attr("dy", ".71em")
      			.style("text-anchor", "end")
      			.text("Count");

      		svg.append("path")
      			.datum(data)
      			.attr("class", "line")
      			.attr("d", line);

      		var focus = svg.append("g")
      			.attr("class", "focus")
      			.style("display", "none");

  			focus.append("circle")
      			.attr("r", 4.5);

  			focus.append("text")
      			.attr("x", 9)
      			.attr("dy", ".35em");

  			svg.append("rect")
      			.attr("class", "overlay")
      			.attr("width", width)
      			.attr("height", height)
      			.on("mouseover", function() { focus.style("display", null); })
      			.on("mouseout", function() { focus.style("display", "none"); })
      			.on("mousemove", mousemove);

  			function mousemove() {
    			var x0 = x.invert(d3.mouse(this)[0]);
    			i = getX(data, x0, 1);

    			d0 = data[i - 1];
    			d1 = data[i];

    			d = x0 - d0.Decade > d1.Decade - x0 ? d1 : d0;

        		focus.attr("transform", "translate(" + x(d.Decade) + "," + y(d.Count) + ")");
    			focus.select("text").text("(" + d.Decade + "," + d.Count + ")");
  			}
      		});
		</script>
	</body>
</html>